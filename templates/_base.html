{% load static %}
{% load i18n %}

<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  {% block page_title %}ÙØ±ÙˆØ´Ú¯Ø§Ù‡ - Ø´Ù‡Ø±Ù‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡{% endblock %}
  <meta name="description" content="Ø¢Ù…ÙˆØ²Ø´â€ŒÙ‡Ø§ Ùˆ Ù…Ù†Ø§Ø¨Ø¹ Ø´Ù‡Ø±Ø³Ø§Ø²ÛŒØŒ GISØŒ AutoCAD Ùˆ Ø·Ø±Ø§Ø­ÛŒ Ø´Ù‡Ø±Ù‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯.">
  <meta property="og:title" content="{{ block.super }}">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="fa_IR">

  <link rel="icon" href="{% static 'images/favicon.ico' %}">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  {% block extra_css %}{% endblock %}

</head>
<body>
  <a class="visually-hidden-focusable" href="#main-content">{% trans "Skip to content" %}</a>

  {% include 'header.html' %}

  {% if messages %}
    <div class="container mt-3">
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }}" role="alert">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="container position-relative">
      <h1>{% trans "Build the Cities of the Future with Us! ğŸŒ" %}</h1>
      <p class="lead">{% trans "Practical GIS, AutoCAD Map, urban planning, and modern city technologies for designing smart and sustainable cities." %}</p>
      <a href="{{ free_resources_url }}" class="btn btn-light btn-lg mt-3">{% trans "See Free Resources! ğŸš€" %}</a>
    </div>
  </section>
  
  <main id="main-content" class="container my-5">
    {% block content %}{% endblock %}
  </main>

  <!-- Newsletter -->
  <section class="newsletter-section">
    <div class="container text-center">
      <h2 class="h3 mb-3">{% trans "Stay Updated with the Latest Urban Planning Tutorials!" %}</h2>
      {% comment %} <p class="text-muted">{% trans "Every week, we email tips and free urban planning resources directly to you." %}</p> {% endcomment %}

      {# Commented newsletter form, fix later #}
            {# Ø¨Ø¹Ø¯Ø§ Ø¯Ø±Ø³ØªØ´ Ú©Ù† Ù„ÛŒÙ†Ú© Ø±Ø§#}
      {% comment %} <form class="d-flex justify-content-center mt-4" method="post" action="{% url 'newsletter_subscribe' %}">
        {% csrf_token %}
        <input name="email" type="email" class="form-control w-50 me-2" 
                placeholder="{% trans 'Enter your email here...' %}" 
                aria-label="{% trans 'Email' %}">
        <button class="btn btn-primary" type="submit">{% trans 'Subscribe' %}</button>
      </form> {% endcomment %}
            


      <div class="mt-3">
        <p>{% trans "Follow us!" %}</p>
        <a href="https://t.me/tisavista" class="text-dark me-2" aria-label="Telegram"><i class="bi bi-telegram"></i></a>
        <a href="https://www.instagram.com/tisavista" class="text-dark me-2" aria-label="Instagram"><i class="bi bi-instagram"></i></a>
        <a href="https://x.com/tisavista" class="text-dark" aria-label="Twitter"><i class="bi bi-twitter"></i></a>
      </div>
    </div>
  </section>

  {% include 'footer.html' %}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>

  <script>
    // Add CSRF Token for fetch requests
    function getCookie(name) {
      const value = `; ${document.cookie}`;
      const parts = value.split(`; ${name}=`);
      if (parts.length === 2) return parts.pop().split(';').shift();
    }
    const csrftoken = getCookie('csrftoken');
    function fetchWithCSRF(url, options = {}) {
      options.headers = Object.assign({}, options.headers || {});
      if (!options.headers['X-CSRFToken'] && csrftoken)
        options.headers['X-CSRFToken'] = csrftoken;
      return fetch(url, options);
    }
  </script>

  {% block extra_js %}{% endblock %}
</body>
</html>
