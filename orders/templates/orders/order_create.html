{% extends "_base.html" %}

{% load persian_translation_tags %}
{% load i18n %}
{% load crispy_forms_tags %}
{% load humanize %}

{% block page_title %}{% trans "Checkout" %}{% endblock %}

{% block content %}
<section class="py-5">
  <div class="container">

    {% translate 'Order Summary' as header_name %}
    {% include 'topheader.html' with header_name=header_name %}

    <div class="row g-5 mt-4">

      <!-- Checkout Form -->
      <div class="col-lg-6">
        <div class="card shadow-sm border-0 p-4">
          <h4 class="fw-bold mb-4">{% trans "Order Details" %}</h4>

          <form method="post" novalidate>
            {% csrf_token %}
            {% if form.errors %}
              <div class="alert alert-danger">
                {{ form.errors }}
              </div>
            {% endif %}

            {{ form|crispy }}

            <button type="submit" class="btn btn-primary mt-3 w-100">
              <i class="bi bi-check-circle me-1"></i> {% trans "Place Order" %}
            </button>
          </form>
        </div>
      </div>

      <!-- Order Summary -->
      <div class="col-lg-6 col-xl-5 offset-xl-1">
        <div class="card shadow-sm border-0 p-4">
          <h4 class="fw-bold mb-4">{% trans "Your Order" %}</h4>

          <div class="table-responsive">
            <table class="table align-middle">
              <thead class="table-light">
                <tr>
                  <th>{% trans "Product" %}</th>
                  <th class="text-end">{% trans "Price" %}</th>
                </tr>
              </thead>
              <tbody>
                {% for item in cart %}
                  <tr>
                    <td>
                      {{ item.product_obj.title }}
                      <strong class="text-muted"> Ã— {{ item.quantity |translate_number }}</strong>
                    </td>
                    <td class="text-end">
                      {{ item.product_obj.price|intcomma:False|translate_number }} {% trans "$" %}
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
              <tfoot>
                <tr class="fw-bold border-top">
                  <td>{% trans "Total" %}</td>
                  <td class="text-end">
                    {{ cart.get_total_price|intcomma:False|translate_number }} {% trans "$" %}
                  </td>
                </tr>
              </tfoot>
            </table>
          </div>

          <!-- Payment Method -->
          <div class="mt-4">
            <h5 class="fw-bold mb-3">{% trans "Payment Method" %}</h5>
            <div class="form-check">
              <input type="radio" class="form-check-input" id="zarinpal" name="payment-method" value="zarinpal" checked>
              <label class="form-check-label" for="zarinpal">
                {% trans "Online Gateway (Zarinpal)" %}
              </label>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>
{% endblock %}
